qemu-system-riscv64 -machine virt -bios none -kernel kernel/kernel -m 128M -smp 1 -nographic -global virtio-mmio.force-legacy=false -drive file=fs.img,if=none,format=raw,id=x0 -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
Using Policy: MQSS

xv6 kernel is booting

init: starting sh
$ test_cpu
18|active|0(100),[1]init:2(10),[2]sh:4(10)
18|active|1(100)
18|active|2(100)
18|active|3(100)
18|active|4(100)
18|expired|0(100)
18|expired|1(100)
18|expired|2(100)
18|expired|3(100)
18|expired|4(100)
$ shutdown
23|active|0(100),[1]init:2(10),[2]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|active|0(100),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|active|0(100),[4]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100),[1]init:2(10),[2]sh:2(10)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|active|0(100),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|active|0(100),[4]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100),[1]init:2(10),[2]sh:2(10)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|active|0(100),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
23|active|1(100)
23|active|2(100)
23|active|3(100)
23|active|4(100)
23|expired|0(100)
23|expired|1(100)
23|expired|2(100)
23|expired|3(100)
23|expired|4(100)
23|act