qemu-system-riscv64 -machine virt -bios none -kernel kernel/kernel -m 128M -smp 1 -nographic -global virtio-mmio.force-legacy=false -drive file=fs.img,if=none,format=raw,id=x0 -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
Using Policy: RR

xv6 kernel is booting

init: starting sh
$ test_io
19|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
20|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
21|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
22|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
23|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
shutdown
24|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
25|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
26|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
27|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
28|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
29|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
30|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
31|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
32|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
33|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
34|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
35|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
36|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
37|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
38|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
39|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
40|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
41|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
42|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
43|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
44|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
45|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
46|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
47|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
48|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
49|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
50|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
51|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
52|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
53|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
54|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
55|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
56|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
57|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
58|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
59|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
60|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
61|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
62|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
63|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
64|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
65|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
66|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
67|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
68|active|0(0),[1]init:2(10),[2]sh:2(10),[3]test_io:4(10)
68|active|0(0),[1]init:2(10),[2]sh:4(10)
$ 68|active|0(0),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
69|active|0(0),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
69|active|0(0),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
70|active|0(0),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
70|active|0(0),[1]init:2(10),[2]sh:2(10),[4]sh:4(10)
